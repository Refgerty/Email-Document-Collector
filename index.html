<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Document Collector</title>
    <link rel="stylesheet" href="style.css">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://apis.google.com https://accounts.google.com; script-src 'self' 'unsafe-inline' https://apis.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://www.perplexity.ai;">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-8">
                        <h1 class="header__title">üìß Email Document Collector</h1>
                    </div>
                    <div class="flex items-center gap-16">
                        <div id="auth-status" class="status status--info hidden">
                            <span id="user-email"></span>
                        </div>
                        <button id="auth-btn" class="btn btn--primary">Connect Gmail</button>
                        <button id="settings-btn" class="btn btn--outline">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Dashboard -->
                <section id="dashboard" class="dashboard">
                    <div class="dashboard__stats">
                        <div class="card">
                            <div class="card__body">
                                <div class="stat">
                                    <div class="stat__icon">üìÑ</div>
                                    <div class="stat__content">
                                        <div class="stat__value" id="total-docs">0</div>
                                        <div class="stat__label">–í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card__body">
                                <div class="stat">
                                    <div class="stat__icon">üîÑ</div>
                                    <div class="stat__content">
                                        <div class="stat__value" id="last-sync">–ù–∏–∫–æ–≥–¥–∞</div>
                                        <div class="stat__label">–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card__body">
                                <div class="stat">
                                    <div class="stat__icon">üìä</div>
                                    <div class="stat__content">
                                        <div class="stat__value" id="categories-count">0</div>
                                        <div class="stat__label">–ö–∞—Ç–µ–≥–æ—Ä–∏–π</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard__actions">
                        <button id="sync-btn" class="btn btn--primary btn--lg" disabled>
                            <span id="sync-text">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å</span>
                        </button>
                        <div id="sync-progress" class="progress hidden">
                            <div class="progress__bar">
                                <div id="progress-fill" class="progress__fill"></div>
                            </div>
                            <div id="progress-text" class="progress__text">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∏—Å–µ–º...</div>
                        </div>
                    </div>
                </section>

                <!-- Documents List -->
                <section id="documents-section" class="documents">
                    <div class="documents__header">
                        <h2>–î–æ–∫—É–º–µ–Ω—Ç—ã</h2>
                        <div class="documents__controls">
                            <div class="form-group">
                                <input type="text" id="search-input" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞...">
                            </div>
                            <div class="form-group">
                                <select id="category-filter" class="form-control">
                                    <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                                    <option value="pdf">üìÑ PDF Documents</option>
                                    <option value="word">üìù Word Documents</option>
                                    <option value="excel">üìä Excel Spreadsheets</option>
                                    <option value="powerpoint">üìà Presentations</option>
                                    <option value="images">üñºÔ∏è Images</option>
                                    <option value="archives">üóúÔ∏è Archives</option>
                                    <option value="other">üìé Other Files</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="documents__table-wrapper">
                            <table class="documents__table">
                                <thead>
                                    <tr>
                                        <th>–ò–º—è —Ñ–∞–π–ª–∞</th>
                                        <th>–†–∞–∑–º–µ—Ä</th>
                                        <th>–î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è</th>
                                        <th>–û—Ç –∫–æ–≥–æ</th>
                                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="documents-list">
                                    <tr id="no-documents" class="documents__empty">
                                        <td colspan="6">
                                            <div class="empty-state">
                                                <div class="empty-state__icon">üì≠</div>
                                                <div class="empty-state__text">–î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
                                                <div class="empty-state__hint">–ü–æ–¥–∫–ª—é—á–∏—Ç–µ Gmail –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é</div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Settings Modal -->
                <div id="settings-modal" class="modal hidden">
                    <div class="modal__backdrop"></div>
                    <div class="modal__content">
                        <div class="modal__header">
                            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                            <button id="close-settings" class="modal__close">‚úï</button>
                        </div>
                        <div class="modal__body">
                            <div class="form-group">
                                <label class="form-label">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</label>
                                <select id="auto-sync-interval" class="form-control">
                                    <option value="0">–û—Ç–∫–ª—é—á–µ–Ω–∞</option>
                                    <option value="900000">–ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç</option>
                                    <option value="1800000" selected>–ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç</option>
                                    <option value="3600000">–ö–∞–∂–¥—ã–π —á–∞—Å</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ú–ë)</label>
                                <input type="number" id="max-file-size" class="form-control" value="50" min="1" max="100">
                            </div>
                            <div class="form-group">
                                <label class="form-label">–¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Å–±–æ—Ä–∞</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="collect-pdf" checked> PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="collect-word" checked> Word –¥–æ–∫—É–º–µ–Ω—Ç—ã
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="collect-excel" checked> Excel —Ç–∞–±–ª–∏—Ü—ã
                                    </label>
                                    <label class="checkbox-item">
                                        <input type="checkbox" id="collect-images" checked> –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="modal__footer">
                            <button id="save-settings" class="btn btn--primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            <button id="clear-documents" class="btn btn--outline btn--danger">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</button>
                        </div>
                    </div>
                </div>

                <!-- Toast Notifications -->
                <div id="toast-container" class="toast-container"></div>
            </div>
        </main>
    </div>

    <!-- Google APIs -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="app.js"></script>
</body>
</html>